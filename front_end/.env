# =====================
# Ambiente da API Cardápio Inteligente
# =====================
# Escolha entre:
#  - Modo local SQLite
#  - Modo Supabase via API (USE_SUPABASE_API=1)
#  - Modo conexão direta Postgres (DATABASE_URL ou vars SUPABASE_HOST,...)
# =====================

# ----- Porta do servidor -----
PORT=3000

# ----- Schema padrão -----
DB_SCHEMA=public

# ----- Flags de controle -----
# Cria somente a tabela sidecar produtos_meta quando usando SQLAlchemy
AUTO_CREATE_META=0
# Desabilita qualquer CREATE TABLE em produção
DISABLE_INIT_DB=1
# Ativa uso da API (supabase client) ao invés de engine SQLAlchemy
USE_SUPABASE_API=1

# =====================
# Supabase API Mode
# =====================
SUPABASE_URL=https://xxclclnineojmdphjxkc.supabase.co
# Chave pública (anon). Permissões dependem das Policies/RLS que você configurar.
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4Y2xjbG5pbmVvam1kcGhqeGtjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc5NTE5NTIsImV4cCI6MjA3MzUyNzk1Mn0.TFDCgreodJ1-Brk-A_npj0T3k1hBYmEsg05dngg8PLc
# Service key (NÃO coloque em frontend / repositório público). Use se quiser operações sem restrição RLS.
# Descomente e preencha se necessário:
# SUPABASE_SERVICE_KEY=COLOQUE_AQUI_A_SERVICE_KEY

# =====================
# Conexão direta Postgres (opcional, alternativa ao modo API)
# (Se quiser usar engine SQLAlchemy com Supabase Postgres diretamente)
# Para usar, comente USE_SUPABASE_API ou defina USE_SUPABASE_API=0.
# DATABASE_URL=postgresql+psycopg2://postgres:SUA_SENHA@xxclclnineojmdphjxkc.supabase.co:5432/postgres?sslmode=require
# OU use variáveis discretas abaixo para montagem automática:
# SUPABASE_HOST=xxclclnineojmdphjxkc.supabase.co
# SUPABASE_DB=postgres
# SUPABASE_USER=postgres
# SUPABASE_PASSWORD=SUA_SENHA_AQUI
# SUPABASE_PORT=5432
# SUPABASE_SSL=1

# =====================
# Modo local (fallback) SQLite
# (deixe tudo acima comentado e remova USE_SUPABASE_API para usar)
# DATABASE_URL=sqlite:///cardapio.db

# =====================
# Ajustes futuros / extensões possíveis
# =====================
# LOG_LEVEL=INFO
# CORS_ORIGINS=http://localhost:3000,http://localhost:5173
# RATE_LIMIT=200

# =====================
# Checklist para produção Supabase
# =====================
# 1. Criar tabelas: categorias, produtos, produtos_meta
# 2. Ativar RLS e definir Policies adequadas
# 3. Usar SUPABASE_SERVICE_KEY somente no backend seguro
# 4. Validar que anon key tem apenas permissões mínimas necessárias
# 5. Auditoria de logs e backups configurados no painel Supabase

